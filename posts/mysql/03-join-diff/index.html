<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>MySQL教程(三)---SQL标准中JOIN语句差异及MySQL中的JOIN实现 -</title><meta name=Description content="SQL92与SQL99 标准中 JOIN 语句的差异点和 MySQL 中 JOIN 语句的具体实现"><meta property="og:title" content="MySQL教程(三)---SQL标准中JOIN语句差异及MySQL中的JOIN实现"><meta property="og:description" content="SQL92与SQL99 标准中 JOIN 语句的差异点和 MySQL 中 JOIN 语句的具体实现"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.yudlk.com/posts/mysql/03-join-diff/"><meta property="og:image" content="https://blog.yudlk.com/img/jinx.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-03-15T22:00:00+00:00"><meta property="article:modified_time" content="2020-03-15T22:00:00+00:00"><meta property="og:site_name" content="qpt的个人博客"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.yudlk.com/img/jinx.png"><meta name=twitter:title content="MySQL教程(三)---SQL标准中JOIN语句差异及MySQL中的JOIN实现"><meta name=twitter:description content="SQL92与SQL99 标准中 JOIN 语句的差异点和 MySQL 中 JOIN 语句的具体实现"><meta name=application-name content="指月小筑"><meta name=apple-mobile-web-app-title content="指月小筑"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://blog.yudlk.com/posts/mysql/03-join-diff/><link rel=prev href=https://blog.yudlk.com/posts/mysql/02-join-detail/><link rel=next href=https://blog.yudlk.com/posts/mysql/05-data-type/><link rel=stylesheet href=/css/style.min.cf6878db51c51b2d04ae155284a4403dbee8db33e16c066f954c95279c271fcd.css integrity="sha256-z2h421HFGy0ErhVShKRAPb7o2zPhbAZvlUyVJ5wnH80="><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload="this.onload=null,this.rel='stylesheet'"><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload="this.onload=null,this.rel='stylesheet'"><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"MySQL教程(三)---SQL标准中JOIN语句差异及MySQL中的JOIN实现","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.yudlk.com\/posts\/mysql\/03-join-diff\/"},"image":["https:\/\/blog.yudlk.com\/img\/jinx.png"],"genre":"posts","keywords":"MySQL","wordcount":2226,"url":"https:\/\/blog.yudlk.com\/posts\/mysql\/03-join-diff\/","datePublished":"2020-03-15T22:00:00+00:00","dateModified":"2020-03-15T22:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"qpt"},"description":"SQL92与SQL99 标准中 JOIN 语句的差异点和 MySQL 中 JOIN 语句的具体实现"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':'auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark')&&document.body.setAttribute('theme','dark')</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title>指月小筑</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/ title=指月小筑>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/about/ title=关于>关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title>指月小筑</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title=指月小筑>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=/about/ title=关于>关于</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">MySQL教程(三)---SQL标准中JOIN语句差异及MySQL中的JOIN实现</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/lixd title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>qpt</a></span>&nbsp;<span class=post-category>included in <a href=/categories/mysql/><i class="far fa-folder fa-fw" aria-hidden=true></i>MySQL</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2020-03-15>2020-03-15</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;2226 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;5 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1-概述>1. 概述</a></li><li><a href=#2-sql92-和-sql99-差异点>2. SQL92 和 SQL99 差异点</a><ul><li><a href=#1-cross-join>1. CROSS JOIN</a></li><li><a href=#2-natural-join>2. NATURAL JOIN</a></li><li><a href=#3-on-条件>3. ON 条件</a></li><li><a href=#4-using连接>4. USING连接</a></li><li><a href=#5-self-join>5. SELF JOIN</a></li><li><a href=#6-小结>6. 小结</a></li></ul></li><li><a href=#3-mysql-中的-join-差异>3. MySQL 中的 JOIN 差异</a><ul><li><a href=#1-left-join>1. LEFT JOIN</a></li><li><a href=#2-inner-join>2. INNER JOIN</a></li><li><a href=#3-left-join-to-inner-join>3. LEFT JOIN to INNER JOIN</a></li></ul></li><li><a href=#4-参考>4. 参考</a></li></ul></nav></div></div><div class=content id=content><p>本文主要记录了 SQL92 标准与 SQL99 标准中 JOIN 语句的一些差异情况。</p><h2 id=1-概述>1. 概述</h2><p>SQL有两个主要的标准，分别是SQL92和SQL99。92和99代表了标准提出的时间，SQL92就是92年提出的标准规范。当然除了SQL92和SQL99以外，还存在SQL-86、SQL-89、SQL:2003、SQL:2008、SQL:2011和SQL:2016等其他的标准。</p><p>实际上最重要的SQL标准就是SQL92和SQL99。一般来说SQL92的形式更简单，但是写的SQL语句会比较长，可读性较差。而SQL99相比于SQL92来说，语法更加复杂，但<code>可读性</code>更强。</p><blockquote><p>推荐使用 SQL99 标准</p></blockquote><h2 id=2-sql92-和-sql99-差异点>2. SQL92 和 SQL99 差异点</h2><p>SQL92 和 SQL99 在 JOIN 连接 写法上的一些区别。</p><h3 id=1-cross-join>1. CROSS JOIN</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=c1># SQL92
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>player</span><span class=p>,</span><span class=w> </span><span class=n>team</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1># SQL99
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>CROSS</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>team</span><span class=w>
</span></span></span></code></pre></div><p>多表连接</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=c1># SQL92
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>t1</span><span class=p>,</span><span class=n>t2</span><span class=p>,</span><span class=n>t3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1># SQL99
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=k>CROSS</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>t2</span><span class=w> </span><span class=k>CROSS</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>t3</span><span class=w>
</span></span></span></code></pre></div><h3 id=2-natural-join>2. NATURAL JOIN</h3><p><code>NATURAL JOIN</code>译作<code>自然连接</code> SQL99 中新增的，和 SQL92 中的等值连接差不多。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=c1># SQL92
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>player_id</span><span class=p>,</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>team_id</span><span class=p>,</span><span class=w> </span><span class=n>player_name</span><span class=p>,</span><span class=w> </span><span class=n>height</span><span class=p>,</span><span class=w> </span><span class=n>team_name</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>team</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>team_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>team_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1># SQL99
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>player_id</span><span class=p>,</span><span class=w> </span><span class=n>team_id</span><span class=p>,</span><span class=w> </span><span class=n>player_name</span><span class=p>,</span><span class=w> </span><span class=n>height</span><span class=p>,</span><span class=w> </span><span class=n>team_name</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>NATURAL</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>team</span><span class=w> 
</span></span></span></code></pre></div><p>实际上，在 SQL99 中用 NATURAL JOIN 替代了 <code>WHERE player.team_id = team.team_id</code>。</p><h3 id=3-on-条件>3. ON 条件</h3><p>同样是 SQL99 中新增的。</p><p>SQL92 中多表连接直接使用<code>,</code>逗号进行连接，条件也直接使用<code>WHERE</code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>A</span><span class=p>,</span><span class=n>B</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>xxx</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>player_name</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>height</span><span class=p>,</span><span class=w> </span><span class=n>h</span><span class=p>.</span><span class=n>height_level</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>p</span><span class=p>,</span><span class=w> </span><span class=n>height_grades</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>h</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>height</span><span class=w> </span><span class=k>BETWEEN</span><span class=w> </span><span class=n>h</span><span class=p>.</span><span class=n>height_lowest</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>h</span><span class=p>.</span><span class=n>height_highest</span><span class=w>
</span></span></span></code></pre></div><p>SQL99 中则使用 JOIN 表示连接, ON 表示条件。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>A</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>B</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>xxx</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>player_name</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>height</span><span class=p>,</span><span class=w> </span><span class=n>h</span><span class=p>.</span><span class=n>height_level</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>height_grades</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>h</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ON</span><span class=w> </span><span class=n>height</span><span class=w> </span><span class=k>BETWEEN</span><span class=w> </span><span class=n>h</span><span class=p>.</span><span class=n>height_lowest</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>h</span><span class=p>.</span><span class=n>height_highest</span><span class=w>
</span></span></span></code></pre></div><h3 id=4-using连接>4. USING连接</h3><blockquote><p>USING 就是等值连接的一种简化形式,SQL99 中新增的。</p></blockquote><p>当我们进行连接的时候，可以用 USING 指定数据表里的同名字段进行等值连接。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>player_id</span><span class=p>,</span><span class=w> </span><span class=n>team_id</span><span class=p>,</span><span class=w> </span><span class=n>player_name</span><span class=p>,</span><span class=w> </span><span class=n>height</span><span class=p>,</span><span class=w> </span><span class=n>team_name</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>team</span><span class=w> </span><span class=k>USING</span><span class=p>(</span><span class=n>team_id</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><p>同时使用<code>JOIN USING</code>可以简化<code>JOIN ON</code>的等值连接，它与下面的 SQL 查询结果是相同的:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>player_id</span><span class=p>,</span><span class=w> </span><span class=n>player</span><span class=p>.</span><span class=n>team_id</span><span class=p>,</span><span class=w> </span><span class=n>player_name</span><span class=p>,</span><span class=w> </span><span class=n>height</span><span class=p>,</span><span class=w> </span><span class=n>team_name</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>team</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>player</span><span class=p>.</span><span class=n>team_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>team</span><span class=p>.</span><span class=n>team_id</span><span class=w>
</span></span></span></code></pre></div><h3 id=5-self-join>5. SELF JOIN</h3><blockquote><p>自连接的原理在 SQL92 和 SQL99 中都是一样的，只是表述方式不同。</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=c1># SQL92 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>player_name</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>height</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=p>,</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>player_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;布雷克-格里芬&#39;</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>height</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>height</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1># SQL99
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>player_name</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>height</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>player_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;布雷克-格里芬&#39;</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>height</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>height</span><span class=w>
</span></span></span></code></pre></div><h3 id=6-小结>6. 小结</h3><p>在 SQL92 中进行查询时，会把所有需要连接的表都放到 FROM 之后，然后在 WHERE 中写明连接的条件。比如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>table1</span><span class=w> </span><span class=n>t1</span><span class=p>,</span><span class=w> </span><span class=n>table2</span><span class=w> </span><span class=n>t2</span><span class=p>,</span><span class=w> </span><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=p>...</span><span class=w>
</span></span></span></code></pre></div><p>而 SQL99 在这方面更灵活，它不需要一次性把所有需要连接的表都放到 FROM 之后，而是采用 JOIN 的方式，每次连接一张表，可以多次使用 JOIN 进行连接。</p><p>另外，我建议多表连接使用 SQL99 标准，因为层次性更强，可读性更强，比如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>table1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>JOIN</span><span class=w> </span><span class=n>table2</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>JOIN</span><span class=w> </span><span class=n>table3</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=p>...</span><span class=w>
</span></span></span></code></pre></div><p>SQL99 采用的这种嵌套结构非常清爽，即使再多的表进行连接也都清晰可见。如果你采用 SQL92，可读性就会大打折扣。</p><p>最后一点就是，SQL99 在 SQL92 的基础上提供了一些特殊语法，比如<code>NATURAL JOIN</code>和<code>JOIN USING</code>。它们在实际中是比较常用的，省略了 ON 后面的等值条件判断，让 SQL 语句更加简洁。</p><h2 id=3-mysql-中的-join-差异>3. MySQL 中的 JOIN 差异</h2><h3 id=1-left-join>1. LEFT JOIN</h3><p>At the parser stage, queries with right outer join operations are converted to equivalent queries containing only left join operations. In the general case, the conversion is performed such that this right join:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=p>(</span><span class=n>T1</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w> </span><span class=k>RIGHT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=p>(</span><span class=n>T2</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=nf>P</span><span class=p>(</span><span class=n>T1</span><span class=p>,</span><span class=w> </span><span class=p>...,</span><span class=w> </span><span class=n>T2</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w>
</span></span></span></code></pre></div><p>Becomes this equivalent left join:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=p>(</span><span class=n>T2</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w> </span><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=p>(</span><span class=n>T1</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=nf>P</span><span class=p>(</span><span class=n>T1</span><span class=p>,</span><span class=w> </span><span class=p>...,</span><span class=w> </span><span class=n>T2</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w>
</span></span></span></code></pre></div><p><strong>在 MySQL 的执行引擎 SQL解析阶段，都会将 right join 转换为 left join</strong></p><p><strong>解释</strong></p><p>因为Mysql只实现了<code>nested-loop</code>算法，该算法的核心就是外表驱动内表</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>for</span><span class=w> </span><span class=k>each</span><span class=w> </span><span class=n>row</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=n>matching</span><span class=w> </span><span class=n>range</span><span class=w> </span><span class=err>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>for</span><span class=w> </span><span class=k>each</span><span class=w> </span><span class=n>row</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>t2</span><span class=w> </span><span class=n>matching</span><span class=w> </span><span class=n>reference</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=err>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=k>each</span><span class=w> </span><span class=n>row</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>t3</span><span class=w> </span><span class=err>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=k>if</span><span class=w> </span><span class=n>row</span><span class=w> </span><span class=n>satisfies</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>conditions</span><span class=p>,</span><span class=w> </span><span class=n>send</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>client</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=err>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=err>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>}</span><span class=w>
</span></span></span></code></pre></div><p>由此可知，它必须要保证外表先被访问。</p><h3 id=2-inner-join>2. INNER JOIN</h3><p>All inner join expressions of the form T1 INNER JOIN T2 ON P(T1,T2) are replaced by the list T1,T2, and P(T1,T2) being joined as a conjunct to the WHERE condition (or to the join condition of the embedding join, if there is any)</p><p>INNER JOIN</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>FROM</span><span class=w> </span><span class=p>(</span><span class=n>T1</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w> </span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=p>(</span><span class=n>T2</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=nf>P</span><span class=p>(</span><span class=n>T1</span><span class=p>,</span><span class=w> </span><span class=p>...,</span><span class=w> </span><span class=n>T2</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w>
</span></span></span></code></pre></div><p>转换为如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>FROM</span><span class=w> </span><span class=p>(</span><span class=n>T1</span><span class=p>,</span><span class=w> </span><span class=p>...,</span><span class=w> </span><span class=n>T2</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=nf>P</span><span class=p>(</span><span class=n>T1</span><span class=p>,</span><span class=w> </span><span class=p>...,</span><span class=w> </span><span class=n>T2</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w>
</span></span></span></code></pre></div><p><strong>相当于将 INNER JOIN 转换成了 CROSS JOIN</strong></p><p>由于在 MySQL 中<code>JOIN</code>、<code>CROSS JOIN</code>、<code>INNER JOIN</code>是等效的,所以这样转换是没有问题的。</p><blockquote><p>In MySQL, <code>JOIN</code>, <code>CROSS JOIN</code>, and <code>INNER JOIN</code> are syntactic equivalents (they can replace each other). In standard SQL, they are not equivalent. <code>INNER JOIN</code> is used with an <code>ON</code> clause, <code>CROSS JOIN</code> is used otherwise.</p><p>官网文档: <a href=https://dev.mysql.com/doc/refman/8.0/en/join.html target=_blank rel="noopener noreffer">https://dev.mysql.com/doc/refman/8.0/en/join.html</a></p></blockquote><h3 id=3-left-join-to-inner-join>3. LEFT JOIN to INNER JOIN</h3><p>Mysql引擎在一些特殊情况下，会将left join转换为inner join。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>T1</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>T2</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=nf>P1</span><span class=p>(</span><span class=n>T1</span><span class=p>,</span><span class=n>T2</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=nf>P</span><span class=p>(</span><span class=n>T1</span><span class=p>,</span><span class=n>T2</span><span class=p>)</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=nf>R</span><span class=p>(</span><span class=n>T2</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><p>这里涉及到两个问题：</p><ul><li>1.为什么要做这样的转换？</li><li>2.什么条件下才可以做转换？</li></ul><p>首先，做转换的目的是为了提高查询效率。在上面的示例中，where条件中的R(T2)原本可以极大地过滤不满足条件的记录，但由于nested loop算法的限制，只能先查T1，再用T1驱动T2。当然，不是所有的left join都能转换为inner join，这就涉及到第2个问题。如果你深知left join和inner join的区别就很好理解第二个问题的答案（不知道两者区别的请自行百度）：</p><p>left join是以T1表为基础，让T2表来匹配，对于没有被匹配的T1的记录，其T2表中相应字段的值全为null。也就是说，left join连表的结果集包含了T1中的所有行记录。与之不同的是，inner join只返回T1表和T2表能匹配上的记录。也就是说，相比left join，inner join少返回了没有被T2匹配上的T1中的记录。那么，如果where中的查询条件能保证返回的结果中一定不包含不能被T2匹配的T1中的记录，那就可以保证left join的查询结果和inner join的查询结果是一样的，在这种情况下，就可以将left join转换为inner join。</p><p>我们再回过头来看官网中的例子：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=n>T2</span><span class=p>.</span><span class=n>B</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=no>NULL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>T2</span><span class=p>.</span><span class=n>B</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>T2</span><span class=p>.</span><span class=n>C</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>T1</span><span class=p>.</span><span class=n>C</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>T2</span><span class=p>.</span><span class=n>B</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=n>T2</span><span class=p>.</span><span class=n>C</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1</span><span class=w>
</span></span></span></code></pre></div><p>如果上面的R(T2)是上面的任意一条，就能保证inner join的结果集中一定没有不能被T2匹配的T1中的记录。以T2.B > 3为例，对于不能被T2匹配的T1中的结果集，其T2中的所有字段都是null，显然不满足T2.B > 3。</p><p>相反，以下R(T2)显然不能满足条件，原因请自行分析：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=n>T2</span><span class=p>.</span><span class=n>B</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=no>NULL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>T1</span><span class=p>.</span><span class=n>B</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>3</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=n>T2</span><span class=p>.</span><span class=n>B</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=no>NULL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>T1</span><span class=p>.</span><span class=n>B</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>3</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=n>T2</span><span class=p>.</span><span class=n>B</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>3</span><span class=w>
</span></span></span></code></pre></div><h2 id=4-参考>4. 参考</h2><p><code>https://blog.csdn.net/Saintyyu/article/details/100170320</code></p><p><code>https://dev.mysql.com/doc/refman/8.0/en/join.html</code></p><p>极客专栏&ndash;&lt;SQL知识必会></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2020-03-15</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://blog.yudlk.com/posts/mysql/03-join-diff/ data-title=MySQL教程(三)---SQL标准中JOIN语句差异及MySQL中的JOIN实现 data-hashtags=MySQL><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://blog.yudlk.com/posts/mysql/03-join-diff/ data-hashtag=MySQL><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://blog.yudlk.com/posts/mysql/03-join-diff/ data-title=MySQL教程(三)---SQL标准中JOIN语句差异及MySQL中的JOIN实现><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://blog.yudlk.com/posts/mysql/03-join-diff/ data-title=MySQL教程(三)---SQL标准中JOIN语句差异及MySQL中的JOIN实现><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://blog.yudlk.com/posts/mysql/03-join-diff/ data-title=MySQL教程(三)---SQL标准中JOIN语句差异及MySQL中的JOIN实现><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/mysql/>MySQL</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/mysql/02-join-detail/ class=prev rel=prev title="MySQL教程(二)---SQL JOIN 语句详解"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>MySQL教程(二)---SQL JOIN 语句详解</a>
<a href=/posts/mysql/05-data-type/ class=next rel=next title=MySQL教程(五)---常见数据类型>MySQL教程(五)---常见数据类型<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.100.2">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2018 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://github.com/lixd target=_blank>qpt</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br><span class=icp><a rel="license external nofollow noopener noreffer" href=https://beian.miit.gov.cn/ target=_blank>渝ICP备20005680号-1</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.480e58b2c2a8605d406f34667e92ff8f1ae50cfee5b653bead570f004839a983.js integrity="sha256-SA5YssKoYF1AbzRmfpL/jxrlDP7ltlO+rVcPAEg5qYM="></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-FL23FNP7CM',{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-FL23FNP7CM" async></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?4b7c98449a6edf8492a8f3404e6d06a0",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7693630257897132" crossorigin=anonymous></script></body></html>