<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>SSM系列(二)---Spring 常用注解分析 -</title><meta name=Description content="Spring 常用注解与配置记录"><meta property="og:title" content="SSM系列(二)---Spring 常用注解分析"><meta property="og:description" content="Spring 常用注解与配置记录"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.yudlk.com/posts/java/ssm/02-spring-annotation/"><meta property="og:image" content="https://blog.yudlk.com/img/jinx.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-10-05T22:00:00+00:00"><meta property="article:modified_time" content="2018-10-05T22:00:00+00:00"><meta property="og:site_name" content="qpt的个人博客"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.yudlk.com/img/jinx.png"><meta name=twitter:title content="SSM系列(二)---Spring 常用注解分析"><meta name=twitter:description content="Spring 常用注解与配置记录"><meta name=application-name content="面对疾风"><meta name=apple-mobile-web-app-title content="面对疾风"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://blog.yudlk.com/posts/java/ssm/02-spring-annotation/><link rel=prev href=https://blog.yudlk.com/posts/java/ssm/01-spring-ioc/><link rel=next href=https://blog.yudlk.com/posts/java/ssm/03-beanfactory-applicationcontext-diff/><link rel=stylesheet href=/css/style.min.cf6878db51c51b2d04ae155284a4403dbee8db33e16c066f954c95279c271fcd.css integrity="sha256-z2h421HFGy0ErhVShKRAPb7o2zPhbAZvlUyVJ5wnH80="><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload="this.onload=null,this.rel='stylesheet'"><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload="this.onload=null,this.rel='stylesheet'"><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"SSM系列(二)---Spring 常用注解分析","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.yudlk.com\/posts\/java\/ssm\/02-spring-annotation\/"},"image":["https:\/\/blog.yudlk.com\/img\/jinx.png"],"genre":"posts","keywords":"Spring","wordcount":2866,"url":"https:\/\/blog.yudlk.com\/posts\/java\/ssm\/02-spring-annotation\/","datePublished":"2018-10-05T22:00:00+00:00","dateModified":"2018-10-05T22:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"qpt"},"description":"Spring 常用注解与配置记录"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':'auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark')&&document.body.setAttribute('theme','dark')</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title>面对疾风</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/ title=面对疾风>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/about/ title=关于>关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title>面对疾风</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title=面对疾风>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=/about/ title=关于>关于</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">SSM系列(二)---Spring 常用注解分析</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/barrypt title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>qpt</a></span>&nbsp;<span class=post-category>included in <a href=/categories/java/><i class="far fa-folder fa-fw" aria-hidden=true></i>Java</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2018-10-05>2018-10-05</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;2866 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;6 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1-bean相关的注解>1. Bean相关的注解</a></li><li><a href=#2-autowired与resource区别>2. @Autowired与@Resource区别</a><ul><li><a href=#21-相同点>2.1 相同点</a></li><li><a href=#22-不同点>2.2 不同点</a></li></ul></li><li><a href=#3-contextannotation-config与contextcomponent-scan>3. context:annotation-config与context:component-scan</a><ul><li><a href=#31-contextannotation-config>3.1 context:annotation-config</a></li><li><a href=#32-contextcomponent-scan>3.2 context:component-scan</a></li><li><a href=#3-实例演示>3. 实例演示</a></li></ul></li><li><a href=#4-自定义初始化与销毁方法>4. 自定义初始化与销毁方法</a></li><li><a href=#5-component和configuration-作为配置类的区别>5. @Component和@Configuration 作为配置类的区别</a><ul><li><a href=#51-概述>5.1 概述</a></li><li><a href=#52-实例演示>5.2 实例演示</a></li><li><a href=#53-原因>5.3 原因</a></li></ul></li><li><a href=#6-参考>6. 参考</a></li></ul></nav></div></div><div class=content id=content><p>本文主要对 Spring 框架中经常用到的注解与配置进行了说明。</p><blockquote><p>更多文章欢迎访问我的个人博客&ndash;><a href=https://www.lixueduan.com/ target=_blank rel="noopener noreffer">幻境云图</a></p></blockquote><h2 id=1-bean相关的注解>1. Bean相关的注解</h2><p>与SpringBean相关的注解有以下四大类：</p><ul><li><strong>@Controller</strong> ：标注一个控制器组件类 <code>Controller层</code></li><li><strong>@Service</strong>：标注一个业务逻辑组件类 <code>Service层</code></li><li><strong>@Repository</strong> ：标注一个 DAO 组件类 <code>DAO层</code></li><li><strong>@Component</strong> ：标注一个普通的 Spring Bean 类 前面三个都不是但又想交给Spring管理就用这个</li></ul><h2 id=2-autowired与resource区别>2. @Autowired与@Resource区别</h2><h3 id=21-相同点>2.1 相同点</h3><p><code>@Resource</code>的作用相当于<code>@Autowired</code>，均可标注在<code>字段</code>或属性的<code>setter方法</code>上。</p><h3 id=22-不同点>2.2 不同点</h3><h4 id=1-提供方>1. 提供方</h4><p><code>@Autowired</code> 是 <code>Spring</code> 提供的注解；</p><p><code>@Resource</code>是<code>J2EE</code>提供的注解，javax.annotation 包下的注解，来自于JSR-250，需要JDK1.6及以上。</p><h4 id=2-注入方式>2. 注入方式</h4><p><code>@Autowired</code>只按照<code>Type</code> 注入；</p><p><code>@Resource</code> 默认按Name自动注入，也提供按照Type 注入；</p><h4 id=3-属性>3. 属性</h4><p><code>@Autowired</code>注解可用于为类的属性、构造器、方法进行注值。</p><p>默认情况下，其依赖的对象必须存在(bean可用)，如果需要改变这种默认方式，可以设置其 required 属性为false。
<code>@Autowired</code>注解<code>默认</code>按照<code>类型</code>装配，如果容器中包含多个同一类型的Bean，那么启动容器时会报找不到指定类型bean的异常，解决办法是结合 <strong>@Qualifier</strong> 注解进行限定，指定注入的bean名称。</p><p><code>@Resource</code>有两个中重要的属性：<code>name</code>和<code>type</code>。</p><p>name 属性指定 byName，如果没有指定 name 属性:</p><p>当注解标注在字段上，即默认取字段的名称作为 bean 名称寻找依赖对象，
当注解标注在属性的setter方法上，即默认取属性名作为bean名称寻找依赖对象。
<code>@Resource</code>如果没有指定name属性，并且按照默认的名称仍然找不到依赖对象时， @Resource注解会回退到按类型装配。但一旦指定了name属性，就只能按名称装配了。</p><h4 id=4-其他>4. 其他</h4><p><code>@Autowired</code>注解进行装配容易抛出异常，特别是装配的 bean 类型有多个的时候,解决的办法是增加 @Qualifier 注解进行限定。</p><p><code>@Resource</code>注解的使用性更为灵活，可指定名称，也可以指定类型；</p><h2 id=3-contextannotation-config与contextcomponent-scan>3. context:annotation-config与context:component-scan</h2><h3 id=31-contextannotation-config>3.1 context:annotation-config</h3><p>我们一般在含有 Spring 的项目中，可能会看到配置项中包含这个配置节点</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;context:annotation-config&gt;</span>
</span></span></code></pre></div><p>这条配置会向 Spring 容器中注册以下4个 BeanPostProcessor</p><ul><li><p>AutowiredAnnotationBeanPostProcessor</p></li><li><p>CommonAnnotationBeanPostProcessor</p></li><li><p>PersistenceAnnotationBeanPostProcessor</p></li><li><p>RequiredAnnotationBeanPostProcessor</p></li></ul><p><strong>注册这4个 BeanPostProcessor 的作用，就是为了你的系统能够识别相应的注解</strong>。</p><p>如果想使用 <code>@Resource</code> 、<code>@PostConstruct</code>、<code>@PreDestroy</code>等注解就必须声明<code>CommonAnnotationBeanPostProcessor</code>。
如果想使用<code> @PersistenceContext</code>注解，就必须声明<code>PersistenceAnnotationBeanPostProcessor</code>的Bean。
如果想使用 @Autowired注解，那么就必须声明<code>AutowiredAnnotationBeanPostProcessor</code>的 Bean。
如果想使用 <code>@Required</code>的注解，就必须声明<code>RequiredAnnotationBeanPostProcesso</code>r的Bean。</p><p><strong>所以如果不加一句<code>context:annotation-config</code>那么上面的这些注解就无法识别</strong>。</p><h3 id=32-contextcomponent-scan>3.2 context:component-scan</h3><p><code>context:component-scan</code>包括了<code>context:annotation-config</code>的功能，即注册 BeanPostProcessor 使系统能够识别上面的注解。</p><p><strong>同时还会自动扫描所配置的包下的 bean</strong>。即 扫描包下面有<code>@Controller</code>、<code>@Service</code>、<code>@Repository</code>、<code>@Component</code>这四个注解的类，自动放入 Spring 容器。</p><p>所以一般写context:component-scan就行了。</p><h3 id=3-实例演示>3. 实例演示</h3><p>就拿前面的 student 和 book 举例
实体类这样写,使用注解进行属性注入</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Student</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Value</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;illusory&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Value</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;23&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=n>age</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Autowired</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>Book</span> <span class=n>book</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Book</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Value</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;defaultType&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>type</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Value</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;defaultName&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>配置文件就不用写各种 property 属性注入了。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;name&#34;</span> <span class=na>value=</span><span class=s>&#34;illusory&#34;</span><span class=nt>&gt;&lt;/property&gt;</span>
</span></span></code></pre></div><p>使用<code>@Autowired</code>后也不用配置引用对象了。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;book&#34;</span> <span class=na>ref=</span><span class=s>&#34;book&#34;</span><span class=nt>&gt;&lt;/property&gt;</span>
</span></span></code></pre></div><p>但是还是需要在 xml配置 bean 的基本信息</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl>  <span class=nt>&lt;bean</span> <span class=na>id=</span><span class=s>&#34;student&#34;</span> <span class=na>class=</span><span class=s>&#34;spring.Student&#34;</span><span class=nt>&gt;&lt;/bean&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;bean</span> <span class=na>id=</span><span class=s>&#34;book&#34;</span> <span class=na>class=</span><span class=s>&#34;spring.Book&#34;</span><span class=nt>&gt;&lt;/bean&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;context:annotation-config</span> <span class=nt>/&gt;</span>
</span></span></code></pre></div><p>如果在实体类加上<code>@Component</code>注解</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Component</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;student&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Student</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Value</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;illusory&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Value</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;23&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=n>age</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Autowired</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>Book</span> <span class=n>book</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>就不用在xml中配置bean了,只需要在xml中配置</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;context:component-scan</span> <span class=na>base-package=</span><span class=s>&#34;spring&#34;</span><span class=nt>/&gt;</span>
</span></span></code></pre></div><p>系统可以识别到前面的注解，同时还会自动扫描包下的 bean。</p><p>这样xml中只要要一行就搞定了。</p><h2 id=4-自定义初始化与销毁方法>4. 自定义初始化与销毁方法</h2><p>init-method destroy-method属性对应的注解</p><ul><li>@PostConstruct注解，在对象创建后调用</li><li>@PreDestroy注解，在对象销毁前调用</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl>    <span class=nd>@PostConstruct</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>init</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;init&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@PreDestroy</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>destory</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;destory&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h2 id=5-component和configuration-作为配置类的区别>5. @Component和@Configuration 作为配置类的区别</h2><h3 id=51-概述>5.1 概述</h3><p><code>@Component</code>和<code>@Configuration</code>都可以作为配置类,但还是有一定差别的。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Target</span><span class=o>({</span><span class=n>ElementType</span><span class=o>.</span><span class=na>TYPE</span><span class=o>})</span>
</span></span><span class=line><span class=cl><span class=nd>@Retention</span><span class=o>(</span><span class=n>RetentionPolicy</span><span class=o>.</span><span class=na>RUNTIME</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nd>@Documented</span>
</span></span><span class=line><span class=cl><span class=nd>@Component</span>  <span class=c1>//看这里！！！
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=nd>@interface</span> <span class=n>Configuration</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=nf>value</span><span class=o>()</span> <span class=k>default</span> <span class=s>&#34;&#34;</span><span class=o>;</span>
</span></span></code></pre></div><p><strong>Spring 中新的 Java 配置支持的核心就是 @Configuration 注解的类</strong>。</p><p>这些类主要包括 @Bean 注解的方法来为 Spring 的 IoC 容器管理的对象定义实例，配置和初始化逻辑。</p><p>使用 @Configuration 来注解类表示类可以被 Spring 的 IoC 容器所使用，作为 bean 定义的资源。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>AppConfig</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Bean</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>MyService</span> <span class=nf>myService</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>MyServiceImpl</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>这和 Spring 的 XML 文件中的非常类似</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;beans&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;bean</span> <span class=na>id=</span><span class=s>&#34;myService&#34;</span> <span class=na>class=</span><span class=s>&#34;com.acme.services.MyServiceImpl&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/beans&gt;</span>
</span></span></code></pre></div><h3 id=52-实例演示>5.2 实例演示</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kd>class</span> <span class=nc>Config</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Bean</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>SimpleBean</span> <span class=nf>simpleBean</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>SimpleBean</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Bean</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>SimpleBeanConsumer</span> <span class=nf>simpleBeanConsumer</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>SimpleBeanConsumer</span><span class=o>(</span><span class=n>simpleBean</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Component</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kd>class</span> <span class=nc>Config</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Bean</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>SimpleBean</span> <span class=nf>simpleBean</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>SimpleBean</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Bean</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>SimpleBeanConsumer</span> <span class=nf>simpleBeanConsumer</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>SimpleBeanConsumer</span><span class=o>(</span><span class=n>simpleBean</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>第一个代码正常工作，正如预期的那样，SimpleBeanConsumer 将会得到一个单例 SimpleBean 的链接。
第二个配置是完全错误的，虽然 Spring 会创建一个 SimpleBean 的单例bean，但是 SimpleBeanConsumer 将获得另一个SimpleBean实例（也就是相当于直接调用new SimpleBean() ，
这个bean是不归Spring管理的）。</p><h3 id=53-原因>5.3 原因</h3><p>使用 <code>@Configuration</code> 所有标记为<code> @Bean</code>的方法将被包装成一个 <code>CGLIB包装器</code>，它的工作方式就好像是这个方法的第一个调用，那么原始方法的主体将被执行，最终的对象将在 Spring上下文中注册。所有进一步的调用只返回从上下文检索的 bean。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>enhanceConfigurationClasses</span><span class=o>(</span><span class=n>ConfigurableListableBeanFactory</span> <span class=n>beanFactory</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>AbstractBeanDefinition</span><span class=o>&gt;</span> <span class=n>configBeanDefs</span> <span class=o>=</span> <span class=k>new</span> <span class=n>LinkedHashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>AbstractBeanDefinition</span><span class=o>&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>String</span> <span class=n>beanName</span> <span class=o>:</span> <span class=n>beanFactory</span><span class=o>.</span><span class=na>getBeanDefinitionNames</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>BeanDefinition</span> <span class=n>beanDef</span> <span class=o>=</span> <span class=n>beanFactory</span><span class=o>.</span><span class=na>getBeanDefinition</span><span class=o>(</span><span class=n>beanName</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=c1>//判断是否被@Configuration标注
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=o>(</span><span class=n>ConfigurationClassUtils</span><span class=o>.</span><span class=na>isFullConfigurationClass</span><span class=o>(</span><span class=n>beanDef</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(!(</span><span class=n>beanDef</span> <span class=k>instanceof</span> <span class=n>AbstractBeanDefinition</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>throw</span> <span class=k>new</span> <span class=n>BeanDefinitionStoreException</span><span class=o>(</span><span class=s>&#34;Cannot enhance @Configuration bean definition &#39;&#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                            <span class=n>beanName</span> <span class=o>+</span> <span class=s>&#34;&#39; since it is not stored in an AbstractBeanDefinition subclass&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>logger</span><span class=o>.</span><span class=na>isWarnEnabled</span><span class=o>()</span> <span class=o>&amp;&amp;</span> <span class=n>beanFactory</span><span class=o>.</span><span class=na>containsSingleton</span><span class=o>(</span><span class=n>beanName</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>logger</span><span class=o>.</span><span class=na>warn</span><span class=o>(</span><span class=s>&#34;Cannot enhance @Configuration bean definition &#39;&#34;</span> <span class=o>+</span> <span class=n>beanName</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                            <span class=s>&#34;&#39; since its singleton instance has been created too early. The typical cause &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                            <span class=s>&#34;is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                            <span class=s>&#34;return type: Consider declaring such methods as &#39;static&#39;.&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=n>configBeanDefs</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=n>beanName</span><span class=o>,</span> <span class=o>(</span><span class=n>AbstractBeanDefinition</span><span class=o>)</span> <span class=n>beanDef</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>configBeanDefs</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// nothing to enhance -&gt; return immediately
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>return</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>ConfigurationClassEnhancer</span> <span class=n>enhancer</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ConfigurationClassEnhancer</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>AbstractBeanDefinition</span><span class=o>&gt;</span> <span class=n>entry</span> <span class=o>:</span> <span class=n>configBeanDefs</span><span class=o>.</span><span class=na>entrySet</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>AbstractBeanDefinition</span> <span class=n>beanDef</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=na>getValue</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=c1>// If a @Configuration class gets proxied, always proxy the target class
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>beanDef</span><span class=o>.</span><span class=na>setAttribute</span><span class=o>(</span><span class=n>AutoProxyUtils</span><span class=o>.</span><span class=na>PRESERVE_TARGET_CLASS_ATTRIBUTE</span><span class=o>,</span> <span class=n>Boolean</span><span class=o>.</span><span class=na>TRUE</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// Set enhanced subclass of the user-specified bean class
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>Class</span><span class=o>&lt;?&gt;</span> <span class=n>configClass</span> <span class=o>=</span> <span class=n>beanDef</span><span class=o>.</span><span class=na>resolveBeanClass</span><span class=o>(</span><span class=k>this</span><span class=o>.</span><span class=na>beanClassLoader</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=c1>//生成代理的class
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>Class</span><span class=o>&lt;?&gt;</span> <span class=n>enhancedClass</span> <span class=o>=</span> <span class=n>enhancer</span><span class=o>.</span><span class=na>enhance</span><span class=o>(</span><span class=n>configClass</span><span class=o>,</span> <span class=k>this</span><span class=o>.</span><span class=na>beanClassLoader</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>configClass</span> <span class=o>!=</span> <span class=n>enhancedClass</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=o>(</span><span class=n>logger</span><span class=o>.</span><span class=na>isDebugEnabled</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                        <span class=n>logger</span><span class=o>.</span><span class=na>debug</span><span class=o>(</span><span class=n>String</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=s>&#34;Replacing bean definition &#39;%s&#39; existing class &#39;%s&#39; with &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                                <span class=s>&#34;enhanced class &#39;%s&#39;&#34;</span><span class=o>,</span> <span class=n>entry</span><span class=o>.</span><span class=na>getKey</span><span class=o>(),</span> <span class=n>configClass</span><span class=o>.</span><span class=na>getName</span><span class=o>(),</span> <span class=n>enhancedClass</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>                    <span class=o>}</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//替换class，将原来的替换为CGLIB代理的class
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>beanDef</span><span class=o>.</span><span class=na>setBeanClass</span><span class=o>(</span><span class=n>enhancedClass</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>catch</span> <span class=o>(</span><span class=n>Throwable</span> <span class=n>ex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>throw</span> <span class=k>new</span> <span class=n>IllegalStateException</span><span class=o>(</span><span class=s>&#34;Cannot load configuration class: &#34;</span> <span class=o>+</span> <span class=n>beanDef</span><span class=o>.</span><span class=na>getBeanClassName</span><span class=o>(),</span> <span class=n>ex</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><p><code>isFullConfigurationClass</code>代码如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//是否为配置类
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>static</span> <span class=kt>boolean</span> <span class=nf>isConfigurationCandidate</span><span class=o>(</span><span class=n>AnnotationMetadata</span> <span class=n>metadata</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=o>(</span><span class=n>isFullConfigurationCandidate</span><span class=o>(</span><span class=n>metadata</span><span class=o>)</span> <span class=o>||</span> <span class=n>isLiteConfigurationCandidate</span><span class=o>(</span><span class=n>metadata</span><span class=o>));</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//是否为完整配置类
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>static</span> <span class=kt>boolean</span> <span class=nf>isFullConfigurationCandidate</span><span class=o>(</span><span class=n>AnnotationMetadata</span> <span class=n>metadata</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>metadata</span><span class=o>.</span><span class=na>isAnnotated</span><span class=o>(</span><span class=n>Configuration</span><span class=o>.</span><span class=na>class</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>//是否为精简配置类
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>static</span> <span class=kt>boolean</span> <span class=nf>isLiteConfigurationCandidate</span><span class=o>(</span><span class=n>AnnotationMetadata</span> <span class=n>metadata</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Do not consider an interface or an annotation...
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=o>(</span><span class=n>metadata</span><span class=o>.</span><span class=na>isInterface</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Any of the typical annotations found?
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=o>(</span><span class=n>String</span> <span class=n>indicator</span> <span class=o>:</span> <span class=n>candidateIndicators</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>metadata</span><span class=o>.</span><span class=na>isAnnotated</span><span class=o>(</span><span class=n>indicator</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Finally, let&#39;s look for @Bean methods...
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>metadata</span><span class=o>.</span><span class=na>hasAnnotatedMethods</span><span class=o>(</span><span class=n>Bean</span><span class=o>.</span><span class=na>class</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=k>catch</span> <span class=o>(</span><span class=n>Throwable</span> <span class=n>ex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>logger</span><span class=o>.</span><span class=na>isDebugEnabled</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=na>debug</span><span class=o>(</span><span class=s>&#34;Failed to introspect @Bean methods on class [&#34;</span> <span class=o>+</span> <span class=n>metadata</span><span class=o>.</span><span class=na>getClassName</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34;]: &#34;</span> <span class=o>+</span> <span class=n>ex</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>//精简配置类包含的注解
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>static</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>candidateIndicators</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>Component</span><span class=o>.</span><span class=na>class</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>candidateIndicators</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>ComponentScan</span><span class=o>.</span><span class=na>class</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>candidateIndicators</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>Import</span><span class=o>.</span><span class=na>class</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>candidateIndicators</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>ImportResource</span><span class=o>.</span><span class=na>class</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=6-参考>6. 参考</h2><p><code>https://blog.csdn.net/long476964/article/details/80626930</code></p><p><code>https://www.jianshu.com/p/89f55286cf21</code></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2018-10-05</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://blog.yudlk.com/posts/java/ssm/02-spring-annotation/ data-title="SSM系列(二)---Spring 常用注解分析" data-hashtags=Spring><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://blog.yudlk.com/posts/java/ssm/02-spring-annotation/ data-hashtag=Spring><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://blog.yudlk.com/posts/java/ssm/02-spring-annotation/ data-title="SSM系列(二)---Spring 常用注解分析"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://blog.yudlk.com/posts/java/ssm/02-spring-annotation/ data-title="SSM系列(二)---Spring 常用注解分析"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://blog.yudlk.com/posts/java/ssm/02-spring-annotation/ data-title="SSM系列(二)---Spring 常用注解分析"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/spring/>Spring</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/java/ssm/01-spring-ioc/ class=prev rel=prev title="SSM系列(一)---Spring IoC 分析"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>SSM系列(一)---Spring IoC 分析</a>
<a href=/posts/java/ssm/03-beanfactory-applicationcontext-diff/ class=next rel=next title="SSM系列(三)---BeanFactory 与 ApplicationContext">SSM系列(三)---BeanFactory 与 ApplicationContext<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.100.2">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2018 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://github.com/barrypt target=_blank>qpt</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.480e58b2c2a8605d406f34667e92ff8f1ae50cfee5b653bead570f004839a983.js integrity="sha256-SA5YssKoYF1AbzRmfpL/jxrlDP7ltlO+rVcPAEg5qYM="></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-FL23FNP7CM',{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-FL23FNP7CM" async></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?4b7c98449a6edf8492a8f3404e6d06a0",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7693630257897132" crossorigin=anonymous></script></body></html>